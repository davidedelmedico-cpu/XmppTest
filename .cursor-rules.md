# Regole importanti per lo sviluppo

## Database locale - SOLO SINCRONIZZAZIONE

**IMPORTANTE: Il database locale è SOLO una sincronizzazione dal server XMPP.**

### Regole fondamentali:
1. **NON modificare MAI il database locale direttamente**
2. **Il database locale si sincronizza DAL server, NON il contrario**
3. **Tutte le modifiche devono essere fatte tramite il server XMPP**
4. **Il database locale è solo una cache/sincronizzazione per performance**

### Cosa fare:
- ✅ Leggere dal database locale (per performance)
- ✅ Sincronizzare dal server al database locale
- ✅ Aggiornare il database locale quando arrivano dati dal server

### Cosa NON fare:
- ❌ Modificare direttamente il database locale
- ❌ Rimuovere dati dal database locale senza rimuoverli dal server
- ❌ Aggiungere dati al database locale senza sincronizzarli dal server
- ❌ Considerare il database locale come fonte di verità

### Esempio sbagliato:
```typescript
// SBAGLIATO - Non fare mai così
await removeConversation(jid) // Rimuove solo dal DB locale
```

### Esempio corretto:
```typescript
// CORRETTO - Modificare tramite server, poi sincronizzare
await client.removeFromServer(jid) // Rimuove dal server
await syncFromServer() // Sincronizza il DB locale dal server
```
